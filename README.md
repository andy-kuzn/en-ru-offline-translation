# en-ru-offline-translation

## Offline system for English-Russian consecutive oral translation (interpretation)

## Офлайновая система для англо-русского последовательного устного перевода

- Система устного перевода использует модели с открытым кодом или штатные компоненты операционных систем персональных компьютеров.
- Система целиком устанавливается на локальный компьютер.
- После завершения установки и настройки голосов для воспроизведения речи система работает без обращения к внешним серверам и не требует подключения к Интернету.

## Базовый алгоритм системы устного перевода:

<img width="800" alt="image" src="https://github.com/andy-kuzn/en-ru-offline-translation/assets/114844265/b5aba815-b8cf-4d90-ab58-6f8275409607">

Для определения языка и распознавания (транскрибирования) речи используется модель OpenAI Wisper base.

https://github.com/openai/whisper

Для перевода полученного текста используются следующие модели машинного перевода OPUS-MT:
- c русского на английский: Helsinki-NLP/opus-mt-ru-en
- c английского на русский: Helsinki-NLP/opus-mt-en-ru

https://huggingface.co/Helsinki-NLP

Для преобразования текста в речь и ее воспроизведения используются следующие модули.

При установке системы устного перевода на ОС Microsoft Windows и macOS: штатные компоненты этих операционных систем – «Экранный диктор» и «Универсальный доступ»,соответственно (с установкой, при необходимости, дополнительных голосов).

При установке системы устного перевода на ОС Ubuntu Linux: синтезатор речи RHVoice.

https://rhvoice.ru

## Варианты архитектуры и версии системы
Система устного перевода реализована в двух вариантах архитектуры: 
- с использованием среды разработки Jupyter Notebook;
- с использованием только скриптов Python (вариант, работающий из командной строки).

Кроме того, для каждой из двух архитектур были разработаны две версии для различных операционных систем:
- для Microsoft Windows и macOS;
- для Ubuntu Linux.

Таким образом, можно использовать один из четырех вариантов
1. Jupyter Notebook на Microsoft Windows и macOS: см. папку win-mac/jupyter.
2. Jupyter Notebook на Ubuntu Linux: см. папку ubuntu/jupyter.
3. Командная строка на Microsoft Windows и macOS: см. папку win-mac/python.
4. Командная строка на Ubuntu Linux: см. папку ubuntu/python.

Загрузка может осуществляться как из этих папок, так и при помощи соответствующих ZIP-файлов, находящихся в папках win-mac и ubuntu.

Систему устного перевода необходимо устанавливать в вирутальное окружение Python.

Рекомендуемые версии Python: 3.8 - 3.11.

## Предварительно устанавливаемое программное обеспечение 
<img width="800" alt="table_1" src="https://github.com/andy-kuzn/en-ru-offline-translation/assets/114844265/ec24c97c-ce93-47f8-bcaf-e8c1e3f6cb17">

* В ходе написания и тестирования кода в качестве среды разработки использовался VSCode.

## Порядок настройки и использования
* При использовании версий для ОС Microsoft Windows и macOS необходимо убедиться, что в операционной системе установлено хотя бы по одному русскому и английскому голосу. При необходимости недостающие голоса могут быть установлены при помощи штатных компонентов: «Экранный диктор» (Microsoft Windows) и «Универсальный доступ» (macOS). 

Для архитектуры с использованием среды разработки Jupyter Notebook:
1. Запускается setup.ipynb (установка зависимостей, настройка голосов для воспроизведения речи).
2. Запускается translate.ipynb (собственно система устного перевода).
При повторном использовании с теми же настройками достаточно запустить только translate.ipynb.

Для архитектуры с использованием только скриптов Python (командной строки):
1. Запускается setup.py (установка зависимостей).
2. Запускается voices.py (настройка голосов для воспроизведения речи; в случае версии для ОС Ubuntu - также и установка голосов в опрерационную систему).
3. Запускается main.py (собственно система устного перевода).
4. При повторном использовании с теми же настройками достаточно запустить только main.py. 
